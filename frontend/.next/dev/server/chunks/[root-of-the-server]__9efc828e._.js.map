{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebApps/ShortLinks/shortlinks/frontend/src/db/postgresdb.ts"],"sourcesContent":["import { Pool } from 'pg';\r\n\r\n// Extend globalThis to include our pool\r\ndeclare global {\r\n  var pool: Pool | undefined;\r\n}\r\n\r\nlet pool: Pool;\r\n\r\nif (!globalThis.pool) {\r\n  pool = new Pool({\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: { rejectUnauthorized: false }, // Required for Neon\r\n  });\r\n  globalThis.pool = pool;\r\n} else {\r\n  pool = globalThis.pool;\r\n}\r\n\r\nexport default pool;\r\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAOA,IAAI;AAEJ,IAAI,CAAC,WAAW,IAAI,EAAE;IACpB,OAAO,IAAI,4GAAI,CAAC;QACd,kBAAkB,QAAQ,GAAG,CAAC,YAAY;QAC1C,KAAK;YAAE,oBAAoB;QAAM;IACnC;IACA,WAAW,IAAI,GAAG;AACpB,OAAO;IACL,OAAO,WAAW,IAAI;AACxB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///E:/WebApps/ShortLinks/shortlinks/frontend/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { NextApiRequest, NextApiResponse } from \"next\";\r\nimport pool from \"@/db/postgresdb\";\r\nimport { LoginRequestBody } from \"@/lib/types\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function POST(req: NextRequest) {\r\n    //  const formData = await request.formData();\r\n\r\n    console.log(process.env.DATABASE_URL)\r\n\r\n    const data: LoginRequestBody = (await req.json()) as LoginRequestBody;\r\n\r\n   \r\n\r\n    const { email, password }: LoginRequestBody = data\r\n\r\n    if (email === undefined || password === undefined) {\r\n        return new NextResponse(JSON.stringify({ error: \"Email or password is invalid\" }));\r\n    }\r\n\r\n    try {\r\n        const result = await pool.query('SELECT * FROM users WHERE email = $1', [email]);\r\n\r\n        if (result.rows.length === 0) {\r\n            return new NextResponse(JSON.stringify({ error: \"Email not Found\", }));\r\n        }\r\n        const user = result.rows[0]\r\n        if (user.password === data.password) {\r\n            return new NextResponse(JSON.stringify({ error: \"login done\", }), {status : 200});\r\n        }\r\n        else {\r\n            return new NextResponse( JSON.stringify({ error: \"Invalid Password\" }),{ status: 401 });\r\n        }\r\n\r\n    }\r\n    catch (err) {\r\n        console.log(`error ${err}`)\r\n        return new NextResponse( JSON.stringify({ error: err }),{ status: 500 });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //return new NextResponse(JSON.stringify({ error: email }))\r\n\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;;;;AAQO,eAAe,KAAK,GAAgB;IACvC,8CAA8C;IAE9C,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,YAAY;IAEpC,MAAM,OAA0B,MAAM,IAAI,IAAI;IAI9C,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAqB;IAE9C,IAAI,UAAU,aAAa,aAAa,WAAW;QAC/C,OAAO,IAAI,gJAAY,CAAC,KAAK,SAAS,CAAC;YAAE,OAAO;QAA+B;IACnF;IAEA,IAAI;QACA,MAAM,SAAS,MAAM,oIAAI,CAAC,KAAK,CAAC,wCAAwC;YAAC;SAAM;QAE/E,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG;YAC1B,OAAO,IAAI,gJAAY,CAAC,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAmB;QACvE;QACA,MAAM,OAAO,OAAO,IAAI,CAAC,EAAE;QAC3B,IAAI,KAAK,QAAQ,KAAK,KAAK,QAAQ,EAAE;YACjC,OAAO,IAAI,gJAAY,CAAC,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAc,IAAI;gBAAC,QAAS;YAAG;QACnF,OACK;YACD,OAAO,IAAI,gJAAY,CAAE,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAmB,IAAG;gBAAE,QAAQ;YAAI;QACzF;IAEJ,EACA,OAAO,KAAK;QACR,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK;QAC1B,OAAO,IAAI,gJAAY,CAAE,KAAK,SAAS,CAAC;YAAE,OAAO;QAAI,IAAG;YAAE,QAAQ;QAAI;IAC1E;AAWA,2DAA2D;AAE/D"}}]
}